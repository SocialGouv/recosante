# Comment faire une migration ?

1. Modifier le modèle voulu. Exemple: ajout de `created_at` dans `/Users/arnaudambroselli/Pro/2023-06-057_Recosanté/recosante/api/ecosante/newsletter/models/newsletter_db.py`

2. Aller dans le dossier ./migrations, dans lequel il y a un fichier alembic.ini

3. lanver `alembic revision --autogenerate -m "created_at for newsletter"` par exemple

# Si ça marche pas (ce qui est mon cas) et que vous ne voulez pas vous fatiguer:

1. Rechercher `a64307cd3c69` qui est l'ID de la dernière migratino

2. Dupliquer le fichier `a64307cd3c69_created_at_newsletter.py`

3. Le renommer avec une nouvelle ID et la description de votre migration, poar exemple `e57d7e8a3c69_somethingelse.py`

4. Modifier le fichier pour qu'il corresponde à votre migration:

```
"""Changement objectif

Revision ID: e57d7e8a3c69
Revises: a64307cd3c69
Create Date: 2023-11-08 14:55:56.245601

"""
from alembic import op
import sqlalchemy as sa


# revision identifiers, used by Alembic.
revision = 'e57d7e8a3c69'
down_revision = 'a64307cd3c69'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###

    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###

    # ### end Alembic commands ###
```
